// session-views.js
//
// The design docs for circle-blvd-sessions.
//
var designDocs = [];

var sessionsDesignDoc = {
	url: '_design/sessions',
	body: 
	{
		version: "1.0.3",
		language: "javascript",
		views: {
			byExpires: {
				map: function (doc) {
					if (doc.session 
						&& doc.session.cookie 
						&& doc.session.cookie.expires) {
						emit(doc.session.cookie.expires, doc._rev);
					}

					if (doc.expires) {
						emit(doc.expires, doc._rev);
					}
				}
			}
		}
	}
};
designDocs.push(sessionsDesignDoc);

module.exports = designDocs;